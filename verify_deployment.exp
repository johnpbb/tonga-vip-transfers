#!/usr/bin/expect -f
set timeout 30
log_user 1

puts "\n=== Checking server status ===\n"

spawn ssh -o StrictHostKeyChecking=no -p 27737 tongavip@vps34.opalstack.com "cd /home/tongavip/apps/tonga-vip-transfers && echo '--- Directory Contents ---' && ls -la && echo '\n--- Server Log ---' && cat server.log && echo '\n--- Process Status ---' && ps aux | grep 'node server.js' | grep -v grep"
expect {
    "password:" {
        send "X16kDrjX7koGA28E\r"
        exp_continue
    }
    eof
}
